{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//carrito \n//--------------------------------------------------------------------------------------------------------------------------\n//      variables y constantes\n//--------------------------------------------------------------------------------------------------------------------------\nalert('hola mundo');\nvar contProducto = document.getElementById('cont-producto');\nvar templateFooter = document.getElementById('template-footer').content;\nvar templateCarrito = document.getElementById('template-carrito').content;\nvar items = document.getElementById('items');\nvar footer = document.getElementById('footer');\nvar valorCarrito = document.getElementById('valor-carrito');\nvar fragment = document.createDocumentFragment();\nvar carrito = {}\n/*objeto vacio del carrito donde se guardaran los productos*/\n;\nvar PrecioTotal = \"\"; //--------------------------------------------------------------------------------------------------------------------------\n//      eventos\n//--------------------------------------------------------------------------------------------------------------------------\n\n/* Capturamos el elemento en el cual se hace click */\n\ncontProducto.addEventListener('click', function (e) {\n  agregarCarrito(e);\n});\n/*capturamos el btn de las acciones en la tabla del pedido*/\n\nitems.addEventListener('click', function (e) {\n  btnAccion(e);\n}); //--------------------------------------------------------------------------------------------------------------------------\n//      funciones\n//--------------------------------------------------------------------------------------------------------------------------\n\nvar agregarCarrito = function agregarCarrito(e) {\n  /* console.log(e.target) */\n\n  /* console.log(e.target.classList.contains('boton')) */\n\n  /*si el elemento que se hace click tiene la clse \"boton\" entonces ejecutara lo siguiente*/\n  if (e.target.classList.contains('boton')) {\n    /* console.log(e.target.parentElement) */\n\n    /*probamos con esta linea que le pasamos todo el div que contiene el producto*/\n    setCarrito(e.target.parentElement);\n    /* empujo el div dentro de la funcion setCarrito*/\n  }\n\n  e.stopPropagation();\n  /* con esto evitamos que se heerede algun evento del padre*/\n};\n/* Esto me permite ir cargando los productos en el objeto carrito*/\n\n\nvar setCarrito = function setCarrito(objeto) {\n  /* console.log(objeto) */\n\n  /*creo un objeto, dentro de la coleccion de objetos que es let carrito*/\n  var producto = {\n    id: objeto.querySelector('button').dataset.id,\n    titulo: objeto.querySelector('h3').textContent,\n    precio: objeto.querySelector('span').textContent,\n    cantidad: 1\n  };\n  /*chequeamos si ese producto ya existe en el objeto, en caso afirmativo aumentamos en 1*/\n\n  if (carrito.hasOwnProperty(producto.id)) {\n    producto.cantidad = carrito[producto.id].cantidad + 1;\n  }\n  /*cargamos el producto al objeto carrito*/\n\n\n  carrito[producto.id] = _objectSpread({}, producto);\n  /*pintamos el carrito*/\n\n  pintarCarrito();\n  console.log(carrito);\n};\n\nvar pintarCarrito = function pintarCarrito() {\n  items.innerHTML = '';\n  Object.values(carrito).forEach(function (producto) {\n    templateCarrito.querySelectorAll('td')[0].textContent = producto.cantidad + \" \" + producto.titulo;\n    /*       templateCarrito.querySelectorAll('td')[1].textContent = producto.cantidad */\n\n    templateCarrito.querySelector('span').textContent = producto.precio * producto.cantidad; //botones\n\n    templateCarrito.querySelector('.btn-info').dataset.id = producto.id;\n    templateCarrito.querySelector('.btn-danger').dataset.id = producto.id;\n    var clone = templateCarrito.cloneNode(true);\n    fragment.appendChild(clone);\n  });\n  items.appendChild(fragment);\n  pintarFooter();\n};\n\nvar pintarFooter = function pintarFooter() {\n  footer.innerHTML = '';\n\n  if (Object.keys(carrito).length === 0) {\n    footer.innerHTML = \"\\n    <th scope=\\\"row\\\" colspan=\\\"5\\\">Carrito vac\\xEDo - comience a comprar!</th>\\n    \";\n    return;\n  } //sacamos la cantidad total de productos y precio total\n\n  /* const nCantidad = Object.values(carrito).reduce( (acc,{cantidad})=> acc+cantidad,0 ) */\n\n\n  var nPrecio = Object.values(carrito).reduce(function (acc, _ref) {\n    var cantidad = _ref.cantidad,\n        precio = _ref.precio;\n    return acc + cantidad * precio;\n  }, 0);\n  PrecioTotal = nPrecio;\n  /* console.log(nPrecio) */\n\n  /* templateFooter.querySelectorAll('td')[0].textContent = nCantidad */\n\n  templateFooter.querySelector('span').textContent = nPrecio;\n  valorCarrito.textContent = nPrecio;\n  var clone = templateFooter.cloneNode(true);\n  fragment.appendChild(clone);\n  footer.appendChild(fragment);\n  var btnVaciar = document.getElementById('vaciar-carrito');\n  btnVaciar.addEventListener('click', function () {\n    carrito = {};\n    pintarCarrito();\n  });\n};\n\nvar btnAccion = function btnAccion(e) {\n  //accion de aumentar\n  if (e.target.classList.contains('btn-info')) {\n    /* console.log(carrito[e.target.dataset.id]) */\n    var producto = carrito[e.target.dataset.id];\n    producto.cantidad++;\n    carrito[e.target.dataset.id] = _objectSpread({}, producto);\n    pintarCarrito();\n  }\n\n  if (e.target.classList.contains('btn-danger')) {\n    var _producto = carrito[e.target.dataset.id];\n    _producto.cantidad--;\n\n    if (_producto.cantidad === 0) {\n      delete carrito[e.target.dataset.id];\n    }\n\n    pintarCarrito();\n  }\n\n  e.stopPropagation();\n}; //Armado del texto del pedido\n// Codigo que captura todo los campos a llenar y enviar el mensaje \n\n\nvar whatsapp = document.querySelector('.boton__whatsapp');\nwhatsapp.addEventListener('click', function () {\n  //alert('holamundo')\n  var nombre = document.getElementById('valor').value;\n  var metodoEnvio = document.getElementById('metodoDeEnvio').value;\n  var metodoPago = document.getElementById('metodoDePago').value;\n  var direccion = document.getElementById('direccion').value;\n  var abono = document.getElementById('abono').value;\n\n  if (nombre) {\n    valor = valor;\n\n    if (metodoEnvio) {\n      if (metodoPago) {\n        if (metodoEnvio == \"Retiro por sucursal\" && metodoPago == \"Mercado pago\") {\n          enviarPedido(valor, metodoEnvio, metodoPago, carrito, PrecioTotal);\n        }\n\n        if (metodoEnvio == \"Envio a domicilio\" && metodoPago == \"Mercado pago\") {\n          if (direccion) {\n            metodoEnvio = metodoEnvio + \" -> Dirección: \" + direccion;\n            enviarPedido(valor, metodoEnvio, metodoPago, carrito, PrecioTotal);\n          } else {\n            alert('Debe completar el campo \"dirección\"');\n          }\n        }\n\n        if (metodoEnvio == \"Retiro por sucursal\" && metodoPago == \"Efectivo\") {\n          if (abono) {\n            metodoPago = metodoPago + \" -> Abonó con: $\" + abono;\n            enviarPedido(valor, metodoEnvio, metodoPago, carrito, PrecioTotal);\n          } else {\n            alert('Debe completar el campo \"Abonó con..\"');\n          }\n        }\n\n        if (metodoEnvio == \"Envio a domicilio\" && metodoPago == \"Efectivo\") {\n          if (direccion) {\n            metodoEnvio = metodoEnvio + \"-> Dirección: \" + direccion;\n\n            if (abono) {\n              metodoPago = metodoPago + \" -> Abonó con $\" + abono;\n              enviarPedido(valor, metodoEnvio, metodoPago, carrito, PrecioTotal);\n            } else {\n              alert('Debe completar el campo \"Abonó con..\"');\n            }\n          } else {\n            alert('Debe completar el campo \"dirección\"');\n          }\n        }\n      } else {\n        alert('Debe completar el campo \"Metodo de pago\"');\n      }\n    } else {\n      alert('Debe completar el campo \"Metodo de envio\"');\n    }\n  } else {\n    alert('Debe completar el campo \"nombre\"');\n  }\n\n  function enviarPedido(valor, metodoEnvio, metodoPago, carrito, PrecioTotal) {\n    var pedido = \"\";\n\n    for (valor in carrito) {\n      for (i in carrito[valor]) {\n        if (i == \"cantidad\") {\n          pedido += i + \":\" + carrito[valor][i] + \"%0A\";\n        }\n\n        if (i == \"id\") {\n          pedido += \"\";\n        }\n\n        if (i == \"titulo\") {\n          pedido += carrito[valor][i];\n        }\n\n        if (i == \"precio\") {\n          pedido += \" - \";\n        }\n      }\n    }\n\n    var mensaje = \"https://api.whatsapp.com/send?phone=5491141774133&text=||----Pedido----|| \" + \"%0A\" + \"%0A\" + \"Nombre: \" + nombre + \"%0A\" + \"Método de envio: \" + metodoEnvio + \"%0A\" + \"Método de pago: \" + metodoPago + \"%0A\" + \"%0A\" + \"Pedido: \" + \"%0A\" + pedido + \"%0A\" + \"PRECIO TOTAL: $\" + PrecioTotal + \"&source=&data=\";\n    window.location.href = mensaje;\n  }\n});","map":null,"metadata":{},"sourceType":"module"}